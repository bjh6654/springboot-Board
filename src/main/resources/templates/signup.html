<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>회원가입</title>
  <style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
    }

    .container {
        background: white;
        border-radius: 12px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        padding: 40px;
        max-width: 400px;
        width: 100%;
    }

    .header {
        text-align: center;
        margin-bottom: 40px;
    }

    .header h1 {
        font-size: 28px;
        color: #333;
        margin-bottom: 8px;
    }

    .header p {
        color: #666;
        font-size: 14px;
    }

    .signup-form {
        margin-bottom: 20px;
    }

    .form-group {
        margin-bottom: 16px;
    }

    .form-group label {
        display: block;
        margin-bottom: 8px;
        color: #333;
        font-weight: 500;
        font-size: 14px;
    }

    .form-group input {
        width: 100%;
        padding: 12px;
        border: 1px solid #ddd;
        border-radius: 6px;
        font-size: 14px;
        transition: border-color 0.3s;
    }

    .form-group input:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .form-group input.error {
        border-color: #ea4335;
    }

    .form-group input.error:focus {
        box-shadow: 0 0 0 3px rgba(234, 67, 53, 0.1);
    }

    .error-message {
        color: #ea4335;
        font-size: 12px;
        margin-top: 4px;
        display: none;
    }

    .error-message.show {
        display: block;
    }

    .checkbox-group {
        display: flex;
        align-items: center;
        margin-bottom: 20px;
        padding: 12px;
        background: #f9f9f9;
        border-radius: 6px;
        border: 1px solid #eee;
    }

    .checkbox-group input[type="checkbox"] {
        width: auto;
        margin-right: 10px;
        cursor: pointer;
        width: 18px;
        height: 18px;
    }

    .checkbox-group label {
        margin: 0;
        color: #555;
        font-size: 14px;
        cursor: pointer;
        flex: 1;
    }

    .password-strength {
        margin-top: 4px;
        height: 4px;
        border-radius: 2px;
        background: #eee;
        overflow: hidden;
    }

    .password-strength-bar {
        height: 100%;
        width: 0;
        transition: width 0.3s, background-color 0.3s;
        background: #ddd;
    }

    .password-strength-bar.weak {
        width: 33%;
        background: #ea4335;
    }

    .password-strength-bar.medium {
        width: 66%;
        background: #fbbc04;
    }

    .password-strength-bar.strong {
        width: 100%;
        background: #34a853;
    }

    .signup-btn {
        width: 100%;
        padding: 12px;
        background: #667eea;
        color: white;
        border: none;
        border-radius: 6px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: background 0.3s;
        margin-bottom: 16px;
    }

    .signup-btn:hover {
        background: #5568d3;
    }

    .signup-btn:disabled {
        background: #ccc;
        cursor: not-allowed;
    }

    .divider {
        display: flex;
        align-items: center;
        margin: 24px 0;
        color: #999;
    }

    .divider::before,
    .divider::after {
        content: '';
        flex: 1;
        height: 1px;
        background: #ddd;
    }

    .divider span {
        margin: 0 12px;
        font-size: 14px;
    }

    .social-signup {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 12px;
        margin-bottom: 20px;
    }

    .social-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 12px;
        border: 1px solid #ddd;
        border-radius: 6px;
        background: white;
        cursor: pointer;
        transition: all 0.3s;
        text-decoration: none;
        font-size: 12px;
        font-weight: 600;
    }

    .social-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .social-btn.google {
        color: #ea4335;
        border-color: #ea4335;
    }

    .social-btn.google:hover {
        background: #fef4f3;
    }

    .social-btn.naver {
        color: white;
        background: #00c73c;
        border-color: #00c73c;
    }

    .social-btn.naver:hover {
        background: #00b030;
    }

    .social-btn.kakao {
        color: #391b1b;
        background: #fde500;
        border-color: #fde500;
    }

    .social-btn.kakao:hover {
        background: #f0d500;
    }

    .social-icon {
        width: 24px;
        height: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 14px;
        margin-right: 6px;
    }

    .footer {
        text-align: center;
        color: #999;
        font-size: 12px;
    }

    .footer a {
        color: #667eea;
        text-decoration: none;
    }

    .footer a:hover {
        text-decoration: underline;
    }

    .alert {
        padding: 12px;
        border-radius: 6px;
        margin-bottom: 16px;
        font-size: 14px;
        display: none;
    }

    .alert.success {
        background: #e6f4ea;
        color: #137333;
        border: 1px solid #34a853;
        display: block;
    }

    .alert.error {
        background: #fce8e6;
        color: #c5221f;
        border: 1px solid #ea4335;
        display: block;
    }

    @media (max-width: 480px) {
        .container {
            padding: 24px;
        }

        .header h1 {
            font-size: 24px;
        }

        .social-signup {
            grid-template-columns: 1fr;
        }

        .social-btn {
            flex-direction: row;
            justify-content: flex-start;
            padding: 12px 16px;
        }
    }
  </style>
</head>
<body>
<div class="container">
  <!-- 헤더 -->
  <div class="header">
    <h1>회원가입</h1>
    <p>새로운 계정을 만드세요</p>
  </div>

  <!-- 알림 메시지 -->
<!--  <div class="alert success" th:if="${param.success}">-->
<!--    회원가입이 완료되었습니다. 로그인해주세요.-->
<!--  </div>-->
<!--  <div class="alert error" th:if="${param.error}">-->
<!--    회원가입에 실패했습니다. 다시 시도해주세요.-->
<!--  </div>-->

  <!-- 회원가입 폼 -->
  <form class="signup-form" action="/member/signup" method="post" th:object="${signupDTO}" onsubmit="return validateForm()">
<!--    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">-->
    <!-- 이메일 -->
    <div class="form-group">
      <label for="email">이메일 <span style="color: #ea4335;">*</span></label>
      <input type="email"
             id="email"
             name="email"
             th:field="*{email}"
             placeholder="이메일"
             required>
      <div class="error-message" th:if="${#fields.hasErrors('email')}" th:errors="*{email}">
        이메일 오류
      </div>
    </div>

      <div class="form-group">
          <label for="email">이름 <span style="color: #ea4335;">*</span></label>
          <input type="text"
                 id="name"
                 name="name"
                 th:field="*{name}"
                 placeholder="이름"
                 required>
      </div>

    <!-- 비밀번호 -->
    <div class="form-group">
      <label for="password">비밀번호 <span style="color: #ea4335;">*</span></label>
      <input type="password"
             id="password"
             name="password"
             th:field="*{password}"
             placeholder="8자 이상의 비밀번호"
             required
             minlength="8"
             onchange="checkPasswordStrength()">
      <div class="error-message" th:if="${#fields.hasErrors('password')}" th:errors="*{password}">
        비밀번호 오류
      </div>
    </div>

    <!-- 비밀번호 확인 -->
    <div class="form-group">
      <label for="confirmPassword">비밀번호 확인 <span style="color: #ea4335;">*</span></label>
      <input type="password"
             id="confirmPassword"
             name="confirmPassword"
             placeholder="비밀번호를 다시 입력해주세요"
             required
             minlength="8"
             onchange="checkPasswordMatch()">
      <div class="error-message" id="passwordMatchError" style="display: none;">
        비밀번호가 일치하지 않습니다.
      </div>
    </div>

    <!-- 이메일 인증 동의 -->
    <div class="checkbox-group">
      <input type="checkbox"
             id="emailConsent"
             name="emailConsent"
             th:field="*{emailConsent}"
             required>
      <label for="emailConsent">
        마케팅 정보 수신에 동의합니다.
      </label>
    </div>

    <!-- 회원가입 버튼 -->
    <button type="submit" class="signup-btn" id="signupBtn">회원가입</button>
  </form>

<!--  &lt;!&ndash; 구분선 &ndash;&gt;-->
<!--  <div class="divider">-->
<!--    <span>또는</span>-->
<!--  </div>-->

<!--  &lt;!&ndash; 소셜 회원가입 &ndash;&gt;-->
<!--  <div class="social-signup">-->
<!--    &lt;!&ndash; Google &ndash;&gt;-->
<!--    <a href="/oauth2/authorization/google" class="social-btn google" title="Google로 가입">-->
<!--      <span class="social-icon">G</span>-->
<!--      <span>Google</span>-->
<!--    </a>-->

<!--    &lt;!&ndash; Naver &ndash;&gt;-->
<!--    <a href="/oauth2/authorization/naver" class="social-btn naver" title="Naver로 가입">-->
<!--      <span class="social-icon">N</span>-->
<!--      <span>Naver</span>-->
<!--    </a>-->

<!--    &lt;!&ndash; Kakao &ndash;&gt;-->
<!--    <a href="/oauth2/authorization/kakao" class="social-btn kakao" title="Kakao로 가입">-->
<!--      <span class="social-icon">K</span>-->
<!--      <span>Kakao</span>-->
<!--    </a>-->
<!--  </div>-->

  <!-- 푸터 -->
  <div class="footer">
    <p>이미 계정이 있으신가요? <a href="/auth/loginPage">로그인</a></p>
  </div>
</div>

<script>
  // 비밀번호 강도 체크
  function checkPasswordStrength() {
      const password = document.getElementById('password').value;
      const strengthBar = document.getElementById('strengthBar');

      if (password.length === 0) {
          strengthBar.className = 'password-strength-bar';
          return;
      }

      let strength = 0;

      // 길이 체크
      if (password.length >= 8) strength++;
      if (password.length >= 12) strength++;

      // 문자 종류 체크
      if (/[a-z]/.test(password)) strength++;
      if (/[A-Z]/.test(password)) strength++;
      if (/[0-9]/.test(password)) strength++;
      if (/[^a-zA-Z0-9]/.test(password)) strength++;

      strengthBar.className = 'password-strength-bar';
      if (strength <= 2) {
          strengthBar.classList.add('weak');
      } else if (strength <= 4) {
          strengthBar.classList.add('medium');
      } else {
          strengthBar.classList.add('strong');
      }
  }

  // 비밀번호 일치 체크
  function checkPasswordMatch() {
      const password = document.getElementById('password').value;
      const confirmPassword = document.getElementById('confirmPassword').value;
      const errorMsg = document.getElementById('passwordMatchError');
      const confirmInput = document.getElementById('confirmPassword');

      if (confirmPassword && password !== confirmPassword) {
          errorMsg.classList.add('show');
          confirmInput.classList.add('error');
      } else {
          errorMsg.classList.remove('show');
          confirmInput.classList.remove('error');
      }
  }

  // 폼 검증
  function validateForm() {
      const password = document.getElementById('password').value;
      const confirmPassword = document.getElementById('confirmPassword').value;
      const emailConsent = document.getElementById('emailConsent').checked;

      // 비밀번호 일치 확인
      if (password !== confirmPassword) {
          alert('비밀번호가 일치하지 않습니다.');
          return false;
      }

      // 이메일 인증 동의 확인
      if (!emailConsent) {
          alert('이메일 인증 및 마케팅 정보 수신에 동의해주세요.');
          return false;
      }

      return true;
  }

  // 비밀번호 변경 감지
  document.getElementById('password').addEventListener('input', checkPasswordStrength);
  document.getElementById('confirmPassword').addEventListener('input', checkPasswordMatch);
</script>
</body>
</html>
